# AI Sync Configuration
#
# This file documents the environment variables required for the AISync module.
# Copy this file to your environment configuration and set the appropriate values.

# ==============================================================================
# REQUIRED VARIABLES
# ==============================================================================

# JWT Secret Key for webhook authentication
# This secret is used to sign JWT tokens sent to the AI service
# Generate a secure random key with: openssl rand -base64 32
#
# IMPORTANT: Never commit this value to version control
# IMPORTANT: Use a strong, randomly generated key in production
JWT_SECRET_KEY=your-secret-key-here

# ==============================================================================
# OPTIONAL VARIABLES
# ==============================================================================

# JWT Algorithm
# Algorithm used for JWT token signing
# Default: HS256
# Options: HS256, HS384, HS512
JWT_ALGORITHM=HS256

# AI Service Base URL
# Overrides the database setting for AI Service URL
# Useful for development/staging environments
# Default: Value from database settings (gibbonSetting: aiServiceURL)
# AI_SERVICE_URL=http://ai-service:8000

# ==============================================================================
# SETUP INSTRUCTIONS
# ==============================================================================
#
# 1. Generate a secure JWT secret key:
#    openssl rand -base64 32
#
# 2. Set the JWT_SECRET_KEY environment variable in your environment:
#    - For Docker: Add to docker-compose.yml environment section
#    - For Apache: Add to .htaccess or httpd.conf
#    - For Nginx: Add to nginx configuration
#    - For development: Add to .env file (ensure .env is in .gitignore)
#
# 3. (Optional) Override AI Service URL for development:
#    AI_SERVICE_URL=http://localhost:8000
#
# 4. (Optional) Change JWT algorithm if needed (rarely required):
#    JWT_ALGORITHM=HS512
#
# ==============================================================================
# SECURITY NOTES
# ==============================================================================
#
# - JWT_SECRET_KEY must be kept secret and never committed to version control
# - Use a strong, randomly generated key (minimum 32 bytes)
# - Rotate the key periodically in production
# - Different environments (dev/staging/prod) should use different keys
# - If key is compromised, generate a new key and update environment
#
# ==============================================================================
# TROUBLESHOOTING
# ==============================================================================
#
# If webhook authentication fails:
# 1. Verify JWT_SECRET_KEY is set in environment
# 2. Check AI service is using the same secret to verify tokens
# 3. Check JWT_ALGORITHM matches between Gibbon and AI service
# 4. Review webhook logs: AISync > View Logs > Filter by "failed"
# 5. Check AI service logs for JWT validation errors
#
# If webhooks are not sent:
# 1. Verify AI_SERVICE_URL is set (database or environment)
# 2. Check "Sync Enabled" setting: AISync > Settings
# 3. Review webhook health: AISync > Health Monitoring
# 4. Check PHP has Guzzle installed: composer show guzzlehttp/guzzle
#
