// LAYA Teacher App - settings.gradle
//
// Gradle settings for the Teacher Android app.
// Configures plugin management and project structure.

pluginManagement {
    includeBuild("../node_modules/@react-native/gradle-plugin")

    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}

plugins {
    // Apply React Native Gradle Plugin for autolinking and Codegen
    id("com.facebook.react.settings")
}

// Configure React Native autolinking
extensions.configure(com.facebook.react.ReactSettingsExtension) { ex ->
    ex.autolinkLibrariesFromCommand()
}

rootProject.name = 'TeacherApp'

// Include the main app module
include ':app'

// This includeBuild exposes com.facebook.react plugin for app/build.gradle
includeBuild("../node_modules/@react-native/gradle-plugin")

// Apply dependency resolution management
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.PREFER_PROJECT)
    repositories {
        google()
        mavenCentral()
        maven { url 'https://www.jitpack.io' }

        // React Native repositories (if node_modules exist)
        def nodeModulesPath = new File(settings.settingsDir, "../node_modules")
        if (nodeModulesPath.exists()) {
            maven {
                url(new File(nodeModulesPath, "react-native/android"))
            }
            maven {
                url(new File(nodeModulesPath, "jsc-android/dist"))
            }
        }
    }
}
