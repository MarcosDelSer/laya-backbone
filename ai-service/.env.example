# ================================================================================================
# LAYA AI Service Environment Configuration
# ================================================================================================
# IMPORTANT: Copy this file to .env and update with your actual values
# NEVER commit the .env file to version control - it contains sensitive secrets
# ================================================================================================

# ================================================================================================
# APPLICATION SETTINGS
# ================================================================================================

# Environment: development, staging, or production
# Controls security features, debug mode, and logging behavior
ENVIRONMENT=development

# Application Debug Mode
# Set to false in production for security and performance
DEBUG=true

# Log Level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ================================================================================================
# DATABASE CONFIGURATION
# ================================================================================================

# PostgreSQL Database Connection
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=laya_ai
POSTGRES_USER=laya
POSTGRES_PASSWORD=change_this_secure_password_in_production

# Database Pool Settings (optional - uses SQLAlchemy defaults if not set)
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10

# ================================================================================================
# AUTHENTICATION & SECURITY
# ================================================================================================

# JWT Secret Key - CRITICAL SECURITY SETTING
# MUST be a strong, random secret key in production
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=CHANGE_THIS_TO_A_RANDOM_SECRET_KEY_IN_PRODUCTION_USE_CRYPTOGRAPHICALLY_SECURE_RANDOM

# JWT Algorithm - HS256 is recommended for symmetric signing
JWT_ALGORITHM=HS256

# JWT Token Expiration (in minutes)
# Default: 60 minutes for access tokens
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# CSRF Protection Settings
# Token expiration in minutes (default: 60)
CSRF_TOKEN_EXPIRE_MINUTES=60

# ================================================================================================
# CORS CONFIGURATION - Security Lockdown
# ================================================================================================

# Comma-separated list of allowed origins for CORS
# DEVELOPMENT: Leave empty for automatic localhost defaults (localhost:3000, localhost:8080, localhost:8000)
# PRODUCTION: Specify exact origins (NEVER use wildcards in production)
# Production example: CORS_ORIGINS=https://app.layaedu.com,https://parent.layaedu.com,https://api.layaedu.com
CORS_ORIGINS=

# ================================================================================================
# RATE LIMITING CONFIGURATION
# ================================================================================================

# Rate Limit Storage Backend
# DEVELOPMENT: Use memory:// for simple in-memory storage
# PRODUCTION: Use Redis for distributed rate limiting across multiple instances
# Redis example: RATE_LIMIT_STORAGE_URI=redis://localhost:6379/0
# Redis with password: RATE_LIMIT_STORAGE_URI=redis://:password@redis-host:6379/0
RATE_LIMIT_STORAGE_URI=memory://

# Redis Configuration (if using Redis for rate limiting)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0
# REDIS_SSL=false

# Rate Limit Values (requests per minute)
# These can be customized per environment
RATE_LIMIT_GENERAL=100
RATE_LIMIT_AUTH=10

# ================================================================================================
# SECURITY HEADERS - XSS & Clickjacking Protection
# ================================================================================================

# Content Security Policy (CSP)
# Controls which resources can be loaded to prevent XSS attacks
# Default is a strict policy - customize if needed for your frontend
# CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; frame-ancestors 'none'

# X-Frame-Options: Prevent clickjacking attacks
# Options: DENY, SAMEORIGIN, or ALLOW-FROM https://example.com
X_FRAME_OPTIONS=DENY

# X-Content-Type-Options: Prevent MIME-type sniffing
# Should always be 'nosniff'
X_CONTENT_TYPE_OPTIONS=nosniff

# ================================================================================================
# HTTPS CONFIGURATION - Production Security
# ================================================================================================

# Enforce HTTPS - Redirect all HTTP traffic to HTTPS
# DEVELOPMENT: Set to false for local development (localhost doesn't have SSL)
# PRODUCTION: Set to true to enforce encrypted traffic
# When enabled:
#   - All HTTP requests are redirected to HTTPS (301 Permanent Redirect)
#   - Strict-Transport-Security (HSTS) header is added to HTTPS responses
#   - Browsers will remember to use HTTPS for future requests (1 year)
# ENFORCE_HTTPS=false  # Development
ENFORCE_HTTPS=false

# NOTE: For production deployment with HTTPS:
# 1. Set ENFORCE_HTTPS=true in production .env
# 2. Configure SSL/TLS certificates in nginx (see nginx/https.conf.example)
# 3. Use Let's Encrypt for free SSL certificates (certbot recommended)
# 4. Configure reverse proxy to set X-Forwarded-Proto header
# 5. Ensure load balancer terminates SSL and forwards to application
#
# See SECURITY.md and nginx/https.conf.example for detailed setup instructions

# ================================================================================================
# EXTERNAL API KEYS (Add as needed for AI/ML services)
# ================================================================================================

# OpenAI API Configuration (if using OpenAI services)
# OPENAI_API_KEY=sk-your-openai-api-key-here
# OPENAI_MODEL=gpt-4
# OPENAI_MAX_TOKENS=1000

# Anthropic Claude API Configuration (if using Claude)
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
# ANTHROPIC_MODEL=claude-3-sonnet-20240229

# ================================================================================================
# WEBHOOK CONFIGURATION
# ================================================================================================

# Webhook Secret for validating incoming webhook requests
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# WEBHOOK_SECRET=your_webhook_secret_here

# ================================================================================================
# SMTP/EMAIL CONFIGURATION (if sending emails)
# ================================================================================================

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-specific-password
# SMTP_FROM_EMAIL=noreply@layaedu.com
# SMTP_FROM_NAME=LAYA Education

# ================================================================================================
# MONITORING & LOGGING (Optional)
# ================================================================================================

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Application Insights / New Relic / DataDog keys (optional)
# APP_INSIGHTS_KEY=your-app-insights-key
# NEW_RELIC_LICENSE_KEY=your-new-relic-key
# DATADOG_API_KEY=your-datadog-key

# ================================================================================================
# PRODUCTION CHECKLIST
# ================================================================================================
# Before deploying to production, ensure you have:
# [ ] Changed JWT_SECRET_KEY to a cryptographically secure random value
# [ ] Changed POSTGRES_PASSWORD to a strong password
# [ ] Set ENVIRONMENT=production
# [ ] Set DEBUG=false
# [ ] Configured CORS_ORIGINS with specific allowed origins (NO wildcards)
# [ ] Changed RATE_LIMIT_STORAGE_URI to Redis for distributed deployments
# [ ] Added any required API keys for external services
# [ ] Configured WEBHOOK_SECRET if using webhooks
# [ ] Set up SMTP settings if sending emails
# [ ] Configured monitoring/logging services
# [ ] Reviewed all security headers
# [ ] Ensured .env is in .gitignore and never committed to version control
# ================================================================================================
