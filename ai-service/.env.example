# LAYA AI Service Configuration
#
# This file documents the environment variables for the LAYA AI Service.
# Copy this file to .env and set the appropriate values for your environment.

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL database host
# Default: localhost
POSTGRES_HOST=localhost

# PostgreSQL database port
# Default: 5432
POSTGRES_PORT=5432

# PostgreSQL database name
# Default: laya_ai
POSTGRES_DB=laya_ai

# PostgreSQL database user
# Default: laya
POSTGRES_USER=laya

# PostgreSQL database password
# IMPORTANT: Change this in production!
POSTGRES_PASSWORD=laya_password

# ==============================================================================
# JWT AUTHENTICATION CONFIGURATION
# ==============================================================================

# JWT Secret Key for token signing
# Generate a secure random key with: openssl rand -base64 64
#
# IMPORTANT: Never commit this value to version control
# IMPORTANT: Use a strong, randomly generated key in production
# IMPORTANT: This secret must match the one used by Gibbon AISync module
JWT_SECRET_KEY=your_jwt_secret_key_change_in_production

# JWT Algorithm
# Algorithm used for JWT token signing
# Default: HS256
# Options: HS256, HS384, HS512
JWT_ALGORITHM=HS256

# ==============================================================================
# TOKEN EXPIRATION SETTINGS (Informational)
# ==============================================================================
#
# Note: Token expiration times are currently hardcoded in the AuthService.
# These values are provided for reference and future configurability:
#
# Access Token Expiration: 15 minutes (900 seconds)
# - Short-lived tokens for API authentication
# - Clients must refresh before expiration
#
# Refresh Token Expiration: 7 days (604800 seconds)
# - Used to obtain new access tokens without re-authentication
# - Stored in TokenBlacklist on logout
#
# Password Reset Token Expiration: 1 hour (3600 seconds)
# - One-time use tokens for password reset
# - Hashed before storage for security

# ==============================================================================
# SETUP INSTRUCTIONS
# ==============================================================================
#
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Generate a secure JWT secret key:
#    openssl rand -base64 64
#
# 3. Update the .env file with your values:
#    - Set JWT_SECRET_KEY to the generated key
#    - Update database credentials as needed
#
# 4. Ensure .env is in .gitignore (it should be already)
#
# 5. Run database migrations:
#    alembic upgrade head
#
# 6. Start the service:
#    uvicorn app.main:app --reload

# ==============================================================================
# SECURITY NOTES
# ==============================================================================
#
# JWT Secret Key Security:
# - Must be kept secret and never committed to version control
# - Use a strong, randomly generated key (minimum 64 bytes recommended)
# - Rotate the key periodically in production
# - Different environments (dev/staging/prod) must use different keys
# - If key is compromised, generate a new key and revoke all existing tokens
# - Must match the JWT_SECRET_KEY in Gibbon's AISync module
#
# Database Security:
# - Never use default credentials in production
# - Use a strong, unique password for the database user
# - Consider using secrets management (Vault, AWS Secrets Manager, etc.)
#
# Password Reset Tokens:
# - Tokens are hashed (SHA-256) before storage for security
# - If database is compromised, attackers cannot use stored tokens
#
# Token Blacklist:
# - Revoked tokens are stored in TokenBlacklist table
# - Token verification checks blacklist to prevent use after logout

# ==============================================================================
# TROUBLESHOOTING
# ==============================================================================
#
# If authentication fails:
# 1. Verify JWT_SECRET_KEY is set and matches Gibbon's configuration
# 2. Check JWT_ALGORITHM matches between services (default: HS256)
# 3. Ensure database connection is working
# 4. Check application logs for specific JWT validation errors
#
# If token refresh fails:
# 1. Check if the refresh token has expired (7 days)
# 2. Verify the token hasn't been blacklisted (logout)
# 3. Check database connectivity
#
# If password reset fails:
# 1. Verify email sending is configured (if applicable)
# 2. Check token hasn't expired (1 hour limit)
# 3. Ensure token hasn't been used already
#
# Database connection issues:
# 1. Verify PostgreSQL is running
# 2. Check POSTGRES_* environment variables
# 3. Ensure database and user exist
# 4. Check network connectivity to database host
